from flask import Flask
app = Flask(__name__)

@app.route('/')
def main():
    return render_template('index.html')

#Build a method called route, aimed at the html page
#Unless we specify, the only thing that's allowed is a get request, so we add it

#For a Post request, the data is in the request itself, in a dictionary-like
#object. In a get request, it's in the envelope
@app.route('/plot', methods=['POST'])
def plot():
    #This is a dictionary-like object that contains the info
    #contained in the request. Since he called the form "my_name",
    #you'll call that for the form.
    first_name = request.form["my_name"]
    full_name = create_plot(first_name)

    #Here, we'd render a new plot template... which could
    #include the rendering of a button itself.
    return full_name

if __name__ == "__main__":
    app.run():

#Example proxy location if running on remote server:
#202101.tditrain.com/user/don@thedataincubator.com/

#Example call:
#https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=IBM&interval=5min&apikey=demo

#Example with symbol:
def create_plot(stock_symbol):
    """
    1. Use stock symbol to call an API to get the required data
    2. Use that data to generate a visualization
    3. Return the components of that visualization
    """
    #For name example, say, it'll add the lastname
    #Obviously can do a lot of additional stuff in here, like
    #build a plot using bokeh tools

    return stock_symbol + "Fox"

#Make below a separate file, saved as for example "index.html"

#Boilerplate html:
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>MyApp</title?
    </head>
    <body>
        <h2>Enter your name</h2>
        #when someone hits submit, post request to route called plot:
        <form id="input" method="POST" action="plot">
            <div>
            #line69, but skipping <br>. This chops up the code a bit.
            </div>
            #THEN line71. Now separate.

#            Enter your name: <input type="text" placeholder="Don" name="my_name"/><br>
#            #"Should probably put this [below] in a div tag"
#            <input type="submit" value="Submit">
        </form>
    </body>
</html>
